<?xml version="1.0" encoding="utf-16"?>
<FightClass xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <FightClassGeneralSettings>
    <FightClassName>Rogue Outlaw</FightClassName>
    <FramePerSecond>25</FramePerSecond>
  </FightClassGeneralSettings>
  <FightClassSpells>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>local kicked=0
if UnitExists("target") and not UnitIsFriend("player", "target") then 
	local spell, rank, displayName, icon, startTime, endTime, isTradeSkill, castID, nonInterrupt = UnitCastingInfo("target");
	if (spell==nil) then
		spell, displayName, icon, startTime, endTime, isTradeSkill, castID, nonInterrupt = UnitChannelInfo("target");
	end
	if (spell~=nil) then
		if (nonInterrupt==false) then 
	--[[					(cheapest first)
						   Kick,Blind,Gouge
	--]]	
			local idSpells={1766,2094,1776};		
			local now=GetTime();
			local guid=UnitGUID("target");
			local type, zero, serverId, instanceId, zoneId, npcId, spawnUid = strsplit("-",guid);
			local dontKick={[82618]={171807};	--[[ Tor'goroth, skip Shadow Bolt to kick Consume Life ]]
							[82682]={166465};	--[[ Archmage Sol, skip Frost Bolt to kick Parasitic Growth ]]
								
	--[[ [86135]={172014,172024,172005};  test Ralshira  ]]

						};
			local ignoreKick=0;
			npcId=tonumber(npcId);
			if (dontKick[npcId]~=nil) then
				if (dontKick[npcId][1]~=nil) then
					for i=1, #dontKick[npcId] do
						if (spell==GetSpellInfo(dontKick[npcId][i])) then
							ignoreKick=1
						end
					end
				end
			end
			for i=1+ignoreKick, #idSpells do
				if (kicked==0) then
					local spellname=GetSpellInfo(idSpells[i])
					local start, duration, enabled = GetSpellCooldown(spellname)
					if (duration==0) then
						if IsSpellInRange(spellname, "target")==1 then
							CastSpellByName(spellname)
							kicked=idSpells[i]
					print(spell.." kicked by "..spellname) 
						end
					end
				end
			end
		else
			local idFeint=1966
			local spellname=GetSpellInfo(idFeint)
			local start, duration, enabled = GetSpellCooldown(spellname)
			if ((duration==0) and not UnitBuff("player",spellname)) then
				CastSpellByName(spellname)
				kicked=1;  --[[ only for log ]]
			end
		end
	end
end
result=(kicked~=0)</LuaScript>
            <VarRet>result</VarRet>
            <ValueRet>true</ValueRet>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>--Kick Spells</SpellName>
      <Priority>39</Priority>
      <CombatOnly>false</CombatOnly>
      <CheckIfKnow>false</CheckIfKnow>
      <CheckIfSpellUsable>false</CheckIfSpellUsable>
      <CheckSpellDistance>false</CheckSpellDistance>
      <AddToSettings>true</AddToSettings>
      <AddToSettingsActiveByDefault>true</AddToSettingsActiveByDefault>
      <NotSpellIsLuaScript>true</NotSpellIsLuaScript>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
      <DescriptionSpell>Kick &gt; Blind &gt; Gouge for interruptable spells</DescriptionSpell>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>
local BladeFlurry=GetSpellInfo(13877)
if (UnitBuff("player",BladeFlurry)~=nil) then
	if UnitExists("target") then 
		result=0
		if UnitExists("focus") and not UnitIsFriend("player", "focus") then
			local t=GetTime();
			local buffexp,buff,buffcnt={},{},{};
			local i,n,c,x,id,found=0;
			repeat 
				i=i+1;
				n,_,_,c,_,_,x,_,_,_,id=UnitAura("focus",i,"PLAYER HARMFUL"); 
				if n then
					buffcnt[n]=c
					buffexp[n]=x-t
					buff[n]=id;
					found=true
				end
			until (not n) or (i==40);
			if found then
				local sap=select(1,GetSpellInfo(6770))
				local blind=select(1,GetSpellInfo(2094))
				if (buff[sap] or buff[blind]) and (IsSpellInRange(sap, "focus")==1) then
					result=true
				end
			end
		end
		if not result==true then
			result=(GetRaidTargetIndex("target")~=nil)
		end
	end
end
</LuaScript>
            <VarRet>result</VarRet>
            <ValueRet>true</ValueRet>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>IsSpellUsable</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>Blade Flurry</Name>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Blade Flurry</SpellName>
      <Priority>38</Priority>
      <CombatOnly>false</CombatOnly>
      <CheckIfKnow>false</CheckIfKnow>
      <CheckIfSpellUsable>false</CheckIfSpellUsable>
      <CheckSpellDistance>false</CheckSpellDistance>
      <CheckIfView>false</CheckIfView>
      <AddToSettings>true</AddToSettings>
      <AddToSettingsActiveByDefault>true</AddToSettingsActiveByDefault>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
      <DescriptionSpell>AOE off, if target marked (raid) or focus is blinded and in range</DescriptionSpell>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>
if UnitExists("target") then 
	local BladeFlurry=GetSpellInfo(13877)
	if (UnitBuff("player",BladeFlurry)~=nil) then
		result=true
	end
end
</LuaScript>
            <VarRet>result</VarRet>
            <ValueRet>true</ValueRet>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>HostileUnitNear</ContionType>
          <Param xsi:type="FightClassConditionUnitNear">
            <Number>2</Number>
            <Type>Smaller</Type>
            <Radius>10</Radius>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>IsSpellUsable</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>Blade Flurry</Name>
            <Need>true</Need>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Blade Flurry</SpellName>
      <Priority>37</Priority>
      <CombatOnly>false</CombatOnly>
      <CheckIfKnow>false</CheckIfKnow>
      <CheckIfSpellUsable>false</CheckIfSpellUsable>
      <CheckSpellDistance>false</CheckSpellDistance>
      <CheckIfView>false</CheckIfView>
      <AddToSettings>true</AddToSettings>
      <AddToSettingsActiveByDefault>true</AddToSettingsActiveByDefault>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
      <DescriptionSpell>AoE. Off, if only one Target,</DescriptionSpell>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>HostileUnitNear</ContionType>
          <Param xsi:type="FightClassConditionUnitNear">
            <Number>1</Number>
            <Type>Bigger</Type>
            <Radius>10</Radius>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>IsSpellUsable</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>Blade Flurry</Name>
            <Need>true</Need>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>
local BladeFlurry=GetSpellInfo(13877)
if (UnitBuff("player",BladeFlurry)==nil) then
	if UnitExists("target") and not UnitIsFriend("player", "target") then 
		result=0
		if UnitExists("focus") and not UnitIsFriend("player", "focus") then
			local t=GetTime();
			local buffexp,buff,buffcnt={},{},{};
			local i,n,c,x,id,found=0;
			repeat 
				i=i+1;
				n,_,_,c,_,_,x,_,_,_,id=UnitAura("focus",i,"PLAYER HARMFUL"); 
				if n then
					buffcnt[n]=c
					buffexp[n]=x-t
					buff[n]=id;
					found=true
				end
			until (not n) or (i==40);
			if found then
				local sap=select(1,GetSpellInfo(6770))
				local blind=select(1,GetSpellInfo(2094))
				if (buff[sap] or buff[blind]) and (IsSpellInRange(sap, "focus")==1) then
					result=false
				end
			end
		end
		if not (result==false) then 
		--[[ Add your Mob-IDs to the list, if Blade should not be enabled ]]
		--[[ (sometimes mmorobot find hostile units, where no one where) ]]

			local ignoreNPC="77182,77692"		--[[ list of ID's of Mobs to ignore, comma seperated ]]

			local guid=UnitGUID("target");
			local type, zero, serverId, instanceId, zoneId, npcId, spawnUid = strsplit("-",guid);
			npcId=tonumber(npcId);
			if (npcId~=nil) then 
				if not (string.find(','..ignoreNPC..',',','..npcId..',')) then
					result=(GetRaidTargetIndex("target")==nil)
				end
			end
		end
	end
end
</LuaScript>
            <VarRet>result</VarRet>
            <ValueRet>true</ValueRet>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Blade Flurry</SpellName>
      <Priority>36</Priority>
      <CombatOnly>false</CombatOnly>
      <CheckIfKnow>false</CheckIfKnow>
      <CheckIfSpellUsable>false</CheckIfSpellUsable>
      <CheckSpellDistance>false</CheckSpellDistance>
      <CheckIfView>false</CheckIfView>
      <AddToSettings>true</AddToSettings>
      <AddToSettingsActiveByDefault>true</AddToSettingsActiveByDefault>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
      <DescriptionSpell>AoE. On for 2+ targets.</DescriptionSpell>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>HostileUnitNear</ContionType>
          <Param xsi:type="FightClassConditionUnitNear">
            <Type>Bigger</Type>
            <Radius>60</Radius>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>
			--[[ PvP or solo AND No Casting and Stealth off and ready ? ]]
			local idStealth=1784
			local start, duration, enabled = GetSpellCooldown(idStealth); 
			result=((UnitIsPVP("player") or (not UnitInParty("player"))) and (duration==0) and (enabled==1) and not (UnitCastingInfo("player")) and not (UnitChannelInfo("player"))) 
			</LuaScript>
            <VarRet>result</VarRet>
            <ValueRet>true</ValueRet>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>MeIsFlying</ContionType>
          <Param xsi:type="FightClassConditionBool" />
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>IsSpellUsable</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>Stealth</Name>
            <Need>true</Need>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Stealth</SpellName>
      <Priority>35</Priority>
      <CombatOnly>false</CombatOnly>
      <CheckIfKnow>false</CheckIfKnow>
      <CheckIfSpellUsable>false</CheckIfSpellUsable>
      <CheckSpellDistance>false</CheckSpellDistance>
      <CheckIfView>false</CheckIfView>
      <AddToSettings>true</AddToSettings>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
      <DescriptionSpell>Stealth. If hostile 30 Yards away. only pvp or solo</DescriptionSpell>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>local spell="nothing"

if UnitExists("target") then
	if not UnitIsFriend("player", "target") and not (UnitLevel("target")==-1) then 
		local stunId =	{
							1833,         --[[ Cheap Shot ]]
							408,          --[[ Kidney Shot ]]
							47481,        --[[ Gnaw ]]
							5211,         --[[ Bash ]]
							22570,        --[[ Maim ]]
							9005,         --[[ Pounce ]]
							24394,        --[[ Intimidation ]]
							91797,        --[[ Monstrous Blow ]]
							50519,        --[[ Sonic Blast ]]
							44572,        --[[ Deep Freeze ]]
							118271,       --[[ Impact ]]
							853,          --[[ Hammer of Justice ]]
							89766,        --[[ Axe Toss ]]
							54786,        --[[ Demon Leap ]]
							30283,        --[[ Shadowfury ]]
							7922,         --[[ Charge Stun ]]
							46968,        --[[ Shockwave ]]
							56,           --[[ Stun ]]
							20549         --[[ War Stomp ]]
						}
							
		local function isStunned(unit)
			for i=1,#stunId do
				local spellname=GetSpellInfo(stunId[i])
				if spellname then
					if UnitAura(unit,spellname) then return true end
				end
			end
			return false
		end
		
		if not isStunned("target") then 
	--[[ not stunned? maybe I can help... ]]	
			if not IsStealthed() then
					--[[ Vanish only in PvP or if another group-member attack this target 
						  test:  set "tryVanish=1" at training dummys ]]
					local tryVanish=0
					
					if UnitIsPVP("player") and UnitIsPVP("target") then 
						tryVanish=1; 
					else
						local group="party"
						if IsInRaid() then 
							group = "raid"
						end
						for i=1,GetNumGroupMembers() do
							local member=group..i
							if not (UnitIsUnit(member,"player")) then
								if (UnitIsUnit(member.."target","target")) then 
									tryVanish=1
									break
								end
							end 
						end
					end
					if (tryVanish==1) then
						local idVanish=1856
						local idCheapShot=1833
						local start, duration, enabled = GetSpellCooldown(idVanish)
						local CSstart, CSduration, CSenabled = GetSpellCooldown(idCheapShot)
						--[[ Vanish AND CheapShot ready? And Target in CS-range ? ]]
						if (duration==0) and (CSduration==0) then
							local spellname=GetSpellInfo(idCheapShot)
							if IsSpellInRange(spellname, "target")==1 then
								spell=GetSpellInfo(idVanish)
							end
						end
					end
			end
		end
	end
	if not (spell=="nothing") then 
		CastSpellByName(spell)
		result=true
	end
end;
</LuaScript>
            <VarRet>result</VarRet>
            <ValueRet>true</ValueRet>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>--Stun</SpellName>
      <Priority>34</Priority>
      <CombatOnly>false</CombatOnly>
      <CheckIfKnow>false</CheckIfKnow>
      <CheckIfSpellUsable>false</CheckIfSpellUsable>
      <CheckSpellDistance>false</CheckSpellDistance>
      <CheckIfView>false</CheckIfView>
      <AddToSettings>true</AddToSettings>
      <NotSpellIsLuaScript>true</NotSpellIsLuaScript>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
      <DescriptionSpell>Stun it, whenever you can</DescriptionSpell>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>HostileUnitNear</ContionType>
          <Param xsi:type="FightClassConditionUnitNear">
            <Number>2</Number>
            <Type>BiggerOrEqual</Type>
            <Radius>10</Radius>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>
if UnitExists("target") and not UnitIsFriend("player", "target") then
	local t=GetTime();
	local buffexp,buff,buffcnt={},{},{};
	local i,n,c,x,id,found=0;
	repeat 
		i=i+1;
		n,_,_,c,_,_,x,_,_,_,id=UnitAura("target",i,"PLAYER HARMFUL"); 
		if n then
			buffcnt[n]=c
			buffexp[n]=x-t
			buff[n]=id;
			found=true
		end
	until (not n) or (i==40);
	if found then
		local sap=select(1,GetSpellInfo(6770))
		local blind=select(1,GetSpellInfo(2094))
		found=false
		if buff[sap] or buff[blind] then
			FocusUnit("target")
			TargetNearestEnemy() 
			if UnitExists("focus") and UnitIsUnit("target","focus") then
				ClearFocus()
			end
			found=true
		end
	end
	--[[ Dont attack death mobs         dont try to attack PvP flaged enemy, if you dont want play pvp ]]
	if (UnitHealth("target")&lt;=1) or (UnitIsPVP("target") and not UnitIsPVP("player")) or (UnitIsPVP("target") and UnitIsPVP("player") and (UnitName("player")~=UnitName("targettarget") and not IsInGroup(LE_PARTY_CATEGORY_INSTANCE)))	then
		if not found then 
			TargetNearestEnemy() 
		end
		result=true
	end
elseif UnitExists("focus") and not UnitIsFriend("player", "focus") then
	TargetUnit("focus")
	ClearFocus()
end
</LuaScript>
            <VarRet>result</VarRet>
            <ValueRet>true</ValueRet>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>--Next Enemy</SpellName>
      <Priority>33</Priority>
      <CombatOnly>false</CombatOnly>
      <CheckIfKnow>false</CheckIfKnow>
      <CheckIfSpellUsable>false</CheckIfSpellUsable>
      <CheckSpellDistance>false</CheckSpellDistance>
      <CheckIfView>false</CheckIfView>
      <AddToSettings>true</AddToSettings>
      <NotSpellIsLuaScript>true</NotSpellIsLuaScript>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
      <DescriptionSpell>Target next enemy if target has health&lt;=1 (mostly dead)</DescriptionSpell>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>TargetIsStunned</ContionType>
          <Param xsi:type="FightClassConditionBool" />
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>
if UnitExists("target") then
	if not UnitIsFriend("player", "target") and not UnitIsDead("target") then
		if IsStealthed() then
			result=true
		end
	end
end;
</LuaScript>
            <VarRet>result</VarRet>
            <ValueRet>true</ValueRet>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Sap</SpellName>
      <Priority>32</Priority>
      <CombatOnly>false</CombatOnly>
      <AddToSettings>true</AddToSettings>
      <OncePerTarget>true</OncePerTarget>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
      <DescriptionSpell>Sap. Happy dreaming.</DescriptionSpell>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>TargetIsStunned</ContionType>
          <Param xsi:type="FightClassConditionBool">
            <Value>true</Value>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>KnowSpell</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>Pick Pocket</Name>
            <Need>true</Need>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>
if UnitExists("target") then
	if not UnitIsFriend("player", "target") and not UnitIsDead("target") then
		if IsStealthed() then
			result=true
		end
	end
end;
			</LuaScript>
            <VarRet>result</VarRet>
            <ValueRet>true</ValueRet>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Pick Pocket</SpellName>
      <Priority>31</Priority>
      <CombatOnly>false</CombatOnly>
      <CheckIfKnow>false</CheckIfKnow>
      <AddToSettings>true</AddToSettings>
      <OncePerTarget>true</OncePerTarget>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
      <DescriptionSpell>in Stealth. if saped</DescriptionSpell>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>MeInMove</ContionType>
          <Param xsi:type="FightClassConditionBool">
            <Value>true</Value>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>
result=(UnitIsPVP("player") or (UnitInParty("player")==nil))
			</LuaScript>
            <VarRet>result</VarRet>
            <ValueRet>true</ValueRet>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>MeInCombat</ContionType>
          <Param xsi:type="FightClassConditionBool" />
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Sprint</SpellName>
      <Priority>30</Priority>
      <CombatOnly>false</CombatOnly>
      <CheckIfView>false</CheckIfView>
      <AddToSettings>true</AddToSettings>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
      <DescriptionSpell>Target to far ? Never !</DescriptionSpell>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>TargetDistance</ContionType>
          <Param xsi:type="FightClassConditionNumber">
            <Type>Bigger</Type>
            <Value>10</Value>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>
if UnitExists("target") then
	if not UnitIsFriend("player", "target") and not UnitIsDead("target") then
		local guid=UnitGUID("target");
		local type, zero, serverId, instanceId, zoneId, npcId, spawnUid = strsplit("-",guid);
		npcId=tonumber(npcId);
		local dontStep={[55294]=1;};	--[[ Ultraxion ]]
		if (dontStep[npcId]==nil) then 
			result=true;
		end
	end
end;
			</LuaScript>
            <VarRet>result</VarRet>
            <ValueRet>true</ValueRet>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Grappling Hook</SpellName>
      <Priority>29</Priority>
      <CombatOnly>false</CombatOnly>
      <AddToSettings>true</AddToSettings>
      <AOESpell>true</AOESpell>
      <OncePerTarget>true</OncePerTarget>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
      <DescriptionSpell>Faster at the target</DescriptionSpell>
      <CastOn>target</CastOn>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>HealthPercent</ContionType>
          <Param xsi:type="FightClassConditionNumber">
            <Type>Smaller</Type>
            <Value>70</Value>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Crimson Vial</SpellName>
      <Priority>28</Priority>
      <CombatOnly>false</CombatOnly>
      <CheckSpellDistance>false</CheckSpellDistance>
      <CheckIfView>false</CheckIfView>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
      <DescriptionSpell>Heal Solo at 70%</DescriptionSpell>
      <CastOnSelf>true</CastOnSelf>
      <CastOn>player</CastOn>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>TargetIsStunned</ContionType>
          <Param xsi:type="FightClassConditionBool" />
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>HostileUnitNear</ContionType>
          <Param xsi:type="FightClassConditionUnitNear">
            <Number>2</Number>
            <Type>BiggerOrEqual</Type>
            <Radius>10</Radius>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Blind</SpellName>
      <Priority>27</Priority>
      <AddToSettings>true</AddToSettings>
      <DescriptionSpell>Prefere --Kick! Used only to stun. Will not work on a lot of enemys</DescriptionSpell>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>
if UnitExists("target") and not UnitIsFriend("player", "target") and (UnitPower("player",4)&lt;=1) then 
	local spell="nothing"
	if (spell=="nothing") then
		local idMarkDeath=137619
		local MDname=GetSpellInfo(idMarkDeath)

		--[[ Marked for Death ready ?]]
		local start, duration, enabled = GetSpellCooldown(MDname)
		if (duration==0) and IsSpellInRange(MDname, "target")==1 then
			spell=MDname
		end
	end
	if not (spell=="nothing") then 
		CastSpellByName(spell)
--[[		print ("CP: "..spell) ]]
		result=true
	end
end;	
</LuaScript>
            <VarRet>result</VarRet>
            <ValueRet>true</ValueRet>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>--Marked for Death</SpellName>
      <Priority>26</Priority>
      <CombatOnly>false</CombatOnly>
      <CheckIfKnow>false</CheckIfKnow>
      <CheckIfSpellUsable>false</CheckIfSpellUsable>
      <CheckSpellDistance>false</CheckSpellDistance>
      <CheckIfView>false</CheckIfView>
      <AddToSettings>true</AddToSettings>
      <AddToSettingsActiveByDefault>true</AddToSettingsActiveByDefault>
      <NotSpellIsLuaScript>true</NotSpellIsLuaScript>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
      <DescriptionSpell>Combopoints Instant (Talent)</DescriptionSpell>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>
if UnitExists("target") and not UnitIsFriend("player", "target") and (UnitHealth("target")&gt;1) then
	if IsInArenaTeam("player") then
		TargetNearestEnemy()
		FocusUnit("target")
		TargetLastTarget()
	end
end
	
</LuaScript>
            <VarRet>result</VarRet>
            <ValueRet>true</ValueRet>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>--autofocus </SpellName>
      <Priority>25</Priority>
      <CombatOnly>false</CombatOnly>
      <CheckIfKnow>false</CheckIfKnow>
      <CheckIfSpellUsable>false</CheckIfSpellUsable>
      <CheckSpellDistance>false</CheckSpellDistance>
      <CheckIfView>false</CheckIfView>
      <AddToSettings>true</AddToSettings>
      <NotSpellIsLuaScript>true</NotSpellIsLuaScript>
      <OncePerTarget>true</OncePerTarget>
      <DescriptionSpell>Arena only</DescriptionSpell>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>
local spellname=GetSpellInfo(1833)  --[[ Cheap Shot ]]
if UnitExists("target") and not UnitIsFriend("player", "target") and (IsSpellInRange(spellname,"target")==1) and UnitIsPlayer("target") then
	--[[ Stealth, Shadow Dance or Subterfuge ]]
	if IsStealthed() or (UnitBuff("player",GetSpellInfo(185313))~=nil) or (UnitBuff("player",GetSpellInfo(108208))~=nil) then
		result=true
	end
end
</LuaScript>
            <VarRet>result</VarRet>
            <ValueRet>true</ValueRet>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>TargetIsStunned</ContionType>
          <Param xsi:type="FightClassConditionBool" />
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Cheap Shot</SpellName>
      <Priority>24</Priority>
      <CheckSpellDistance>false</CheckSpellDistance>
      <CheckIfView>false</CheckIfView>
      <AddToSettingsActiveByDefault>true</AddToSettingsActiveByDefault>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
      <DescriptionSpell>PVP only. Stun it, whenever you can</DescriptionSpell>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>
local spellname=GetSpellInfo(1833)  --[[ Cheap Shot ]]
if UnitExists("target") and not UnitIsFriend("player", "target") and (IsSpellInRange(spellname,"target")==1) then
	--[[ Stealth, Shadow Dance or Subterfuge ]]
	if IsStealthed() or (UnitBuff("player",GetSpellInfo(185313))~=nil) or (UnitBuff("player",GetSpellInfo(108208))~=nil) then
		result=true
	end
end
</LuaScript>
            <VarRet>result</VarRet>
            <ValueRet>true</ValueRet>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>TargetIsStunned</ContionType>
          <Param xsi:type="FightClassConditionBool" />
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>TargetIsBoss</ContionType>
          <Param xsi:type="FightClassConditionBool" />
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>TargetIsWorldBoss</ContionType>
          <Param xsi:type="FightClassConditionBool" />
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Cheap Shot</SpellName>
      <Priority>23</Priority>
      <CheckSpellDistance>false</CheckSpellDistance>
      <CheckIfView>false</CheckIfView>
      <AddToSettings>true</AddToSettings>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
      <DescriptionSpell>PVE only. Stun it, whenever you can</DescriptionSpell>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>local attack=0
if UnitExists("target") and not UnitIsFriend("player", "target") then
	if IsStealthed() then
		if not (UnitIsPVP("target")) and (((UnitHealth("target") / UnitHealthMax("target") * 100) &gt; 97) or (UnitLevel("target")==-1)) then
	--[[ Ambush only if target is not in PVP and only as Opener OR target is a boss (they are not stuneable, so we prefere Ambush) ]]
			local idAmbush=8676
			local start, duration, enabled = GetSpellCooldown(idAmbush)
			local Ambush=GetSpellInfo(idAmbush)
			if (duration==0) and IsSpellInRange(Ambush, "target")==1 then
				local PickPocket=GetSpellInfo(921)
				CastSpellByName(PickPocket)
				CastSpellByName(Ambush)
				attack=Ambush
			end
		end
		if (attack==0) then
	--[[ 1. try Ambush (failed if you dont know the spell)

		 2. try Cheap Shot (failed if unknown)
		 3. try Garrote (failed if unknown)
		 4. try ( Forth try? You are not level 20 ????)					okay, a simple sinister will do the work
	--]]
			local idSpells={1833,703,193315}
			for i=1,#idSpells do
				local spellname=GetSpellInfo(idSpells[i])
				local start, duration, enabled = GetSpellCooldown(spellname)
				if (duration==0) then
					if IsSpellInRange(spellname, "target")==1 then
						CastSpellByName(spellname)
						attack=spellname
					end
				end
			end
		--[[ no more try. get near to the target !!! You'are a melee !!! ]]
		end
		result=(attack~=0)
	end
end
</LuaScript>
            <VarRet>result</VarRet>
            <ValueRet>true</ValueRet>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>TargetIsStunned</ContionType>
          <Param xsi:type="FightClassConditionBool" />
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>--Break Stealth</SpellName>
      <Priority>22</Priority>
      <CombatOnly>false</CombatOnly>
      <CheckIfKnow>false</CheckIfKnow>
      <CheckIfSpellUsable>false</CheckIfSpellUsable>
      <CheckSpellDistance>false</CheckSpellDistance>
      <CheckIfView>false</CheckIfView>
      <AddToSettings>true</AddToSettings>
      <NotSpellIsLuaScript>true</NotSpellIsLuaScript>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
      <DescriptionSpell>Break stealth with ambush, Cheap shot or Garrote</DescriptionSpell>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript> 
if UnitExists("target") and not UnitIsDead("target") and not UnitIsFriend("player", "target") then 
	if not IsStealthed() then
		local idSaberSlash=193315
		local ssname=GetSpellInfo(idSaberSlash)
		if IsSpellInRange(ssname,"target")==1 then
			result=true
			StartAttack("target")
		end
	else
		StopAttack()
	end
end
			</LuaScript>
            <VarRet>result</VarRet>
            <ValueRet>true</ValueRet>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>--startattack</SpellName>
      <Priority>21</Priority>
      <CheckIfKnow>false</CheckIfKnow>
      <CheckIfSpellUsable>false</CheckIfSpellUsable>
      <CheckSpellDistance>false</CheckSpellDistance>
      <AddToSettings>true</AddToSettings>
      <AddToSettingsActiveByDefault>true</AddToSettingsActiveByDefault>
      <NotSpellIsLuaScript>true</NotSpellIsLuaScript>
      <OncePerTarget>true</OncePerTarget>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
      <DescriptionSpell>Important on every new target</DescriptionSpell>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>
--[[ missing True Bearing buff and 6 CP and Health &gt;=50% (we dont want die while rolling) ]]
local idMarkDeath=137619
local MDname=GetSpellInfo(idMarkDeath)
local start, duration, enabled = GetSpellCooldown(MDname)
local CP=UnitPower("player",4)
local maxCP=UnitPowerMax("player",4)
	local TalSelected=select(5,GetTalentInfo(3,2, GetActiveSpecGroup()))
	if TalSelected then
		maxCP=5
	end
if UnitExists("target") and ((CP&gt;=maxCP) or ((CP&gt;=5) and duration&gt;0)) and (UnitBuff("player",GetSpellInfo(193359))==nil) and ((UnitHealth("player") / UnitHealthMax("player") * 100) &gt; 50) then 
--[[ Jolly Roger, Broadsides, Buried Treasure, Grand Melee, Shark Infested Waters ]]
	local idBuffs={199603,193356,199600,193358,193357}
	local BuffCounter=0
	for i=1,#idBuffs do
		if (UnitBuff("player",GetSpellInfo(idBuffs[i]))~=nil) then
		  BuffCounter=BuffCounter+1;
		end
	end
	if (BuffCounter &lt; 2) then
		local idRoll=193316
		local spellname=GetSpellInfo(idRoll)
		local start, duration, enabled = GetSpellCooldown(spellname)
		if (duration==0) then
			local idSaberSlash=193315
			local ssname=GetSpellInfo(idSaberSlash)
			if IsSpellInRange(ssname,"target")==1 then 
				CastSpellByName(spellname)
				result=true
			end
		end
	end
end

</LuaScript>
            <VarRet>result</VarRet>
            <ValueRet>true</ValueRet>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>--Roll the Bones until TB</SpellName>
      <Priority>20</Priority>
      <CheckIfKnow>false</CheckIfKnow>
      <CheckIfSpellUsable>false</CheckIfSpellUsable>
      <CheckSpellDistance>false</CheckSpellDistance>
      <CheckIfView>false</CheckIfView>
      <AddToSettings>true</AddToSettings>
      <NotSpellIsLuaScript>true</NotSpellIsLuaScript>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
      <DescriptionSpell>Roll to get True Bearing OR 2 other buffs</DescriptionSpell>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>
local idMarkDeath=137619
local MDname=GetSpellInfo(idMarkDeath)
local start, duration, enabled = GetSpellCooldown(MDname)
local CP=UnitPower("player",4)
local maxCP=UnitPowerMax("player",4)
	local TalSelected=select(5,GetTalentInfo(3,2, GetActiveSpecGroup()))
	if TalSelected then
		maxCP=5
	end

if UnitExists("target") and ((CP&gt;=maxCP) or ((CP&gt;=5) and duration&gt;0))  then 
--[[ True Bearing, Jolly Roger, Broadsides, Buried Treasure, Grand Melee, Shark Infested Water ]]
	local idBuffs={193359,199603,193356,199600,193358,193357}
	local BuffCounter=0
	for i=1,#idBuffs do
		if (UnitBuff("player",GetSpellInfo(idBuffs[i]))~=nil) then
		  BuffCounter=BuffCounter+1;
		end
	end
	if (BuffCounter==0) then
		local idRoll=193316
		local spellname=GetSpellInfo(idRoll)
		local start, duration, enabled = GetSpellCooldown(spellname)
		if (duration==0) then
			local idSaberSlash=193315
			local ssname=GetSpellInfo(idSaberSlash)
			if IsSpellInRange(ssname,"target")==1 then 
				CastSpellByName(spellname)
				result=true
			end
		end
	end
end

</LuaScript>
            <VarRet>result</VarRet>
            <ValueRet>true</ValueRet>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>--Roll the Bones</SpellName>
      <Priority>19</Priority>
      <CheckIfKnow>false</CheckIfKnow>
      <CheckIfSpellUsable>false</CheckIfSpellUsable>
      <CheckSpellDistance>false</CheckSpellDistance>
      <CheckIfView>false</CheckIfView>
      <AddToSettings>true</AddToSettings>
      <AddToSettingsActiveByDefault>true</AddToSettingsActiveByDefault>
      <NotSpellIsLuaScript>true</NotSpellIsLuaScript>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
      <DescriptionSpell>Roll to get a Buff</DescriptionSpell>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>
local ShadowsOfCloak=select(1,GetSpellInfo(155722))
if UnitExists("target") and not UnitIsFriend("player", "target") then
	local t=GetTime();
	local buffexp,buff,buffcnt,bufftyp={},{},{},{};
	local i,n,c,y,x,id,found=0;
	repeat 
		i=i+1;
		n,_,_,c,y,_,x,_,_,_,id=UnitAura("PLAYER",i,"HARMFUL"); 
		if n then
			buffcnt[n]=c
			bufftyp[n]=y
			buffexp[n]=x-t
			buff[n]=id;
			found=true
		end
	until (not n) or (i==40);
	if found then
		local x=""
		for n in pairs(bufftyp) do
			if bufftyp[n]=="Curse" or bufftyp[n]=="Magic" then
				result=true
				x=x..n.." "
			end
		end
		if x~="" then
			print(x.."removed")
		end
	end
end

			</LuaScript>
            <VarRet>result</VarRet>
            <ValueRet>true</ValueRet>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Cloak of Shadows</SpellName>
      <Priority>18</Priority>
      <CheckSpellDistance>false</CheckSpellDistance>
      <CheckIfView>false</CheckIfView>
      <AddToSettings>true</AddToSettings>
      <CastOnSelf>true</CastOnSelf>
      <CastOn>player</CastOn>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>Buff</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>Stealth</Name>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Cannonball Barrage</SpellName>
      <Priority>17</Priority>
      <CombatOnly>false</CombatOnly>
      <AddToSettings>true</AddToSettings>
      <AddToSettingsActiveByDefault>true</AddToSettingsActiveByDefault>
      <AOESpell>true</AOESpell>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
      <CastOn>target</CastOn>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>
if UnitExists("target") then
	if not UnitIsFriend("player", "target") and not UnitIsDead("target") then
		local chkValue=true  --[[1784=Stealth,73651=Recuperate,5171=Slice and Dice,13750=Adrenalin Rush]]
		local chkBuffs={1784,false,13750,false}; 	for n=1,#chkBuffs,2 do chkValue=chkValue and ((UnitBuff("player",GetSpellInfo(chkBuffs[n]))~=nil)==chkBuffs[n+1]); end
		result=chkValue
	end
end;</LuaScript>
            <VarRet>result</VarRet>
            <ValueRet>true</ValueRet>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Adrenaline Rush</SpellName>
      <Priority>16</Priority>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
      <DescriptionSpell>on Cooldown</DescriptionSpell>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>
if UnitExists("target") then
	if not UnitIsFriend("player", "target") and not UnitIsDead("target") then
		local chkValue=true  --[[1784=Stealth,73651=Recuperate,5171=Slice and Dice,13750=Adrenalin Rush,202655=Curse of the Dreadblades]]
		local chkBuffs={1784,false,202665,false}; 	for n=1,#chkBuffs,2 do chkValue=chkValue and ((UnitBuff("player",GetSpellInfo(chkBuffs[n]))~=nil)==chkBuffs[n+1]); end
		result=chkValue
	end
end;</LuaScript>
            <VarRet>result</VarRet>
            <ValueRet>true</ValueRet>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Curse of the Dreadblades</SpellName>
      <Priority>15</Priority>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
      <DescriptionSpell>on Cooldown</DescriptionSpell>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>ComboPoint</ContionType>
          <Param xsi:type="FightClassConditionNumber">
            <Type>BiggerOrEqual</Type>
            <Value>6</Value>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>Buff</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>Adrenaline Rush</Name>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>Buff</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>Stealth</Name>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Death from Above</SpellName>
      <Priority>14</Priority>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
      <DescriptionSpell>Finisher without Adrenaline Rush</DescriptionSpell>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>ComboPoint</ContionType>
          <Param xsi:type="FightClassConditionNumber">
            <Type>BiggerOrEqual</Type>
            <Value>5</Value>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>Buff</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>Stealth</Name>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Run Through</SpellName>
      <Priority>13</Priority>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
      <DescriptionSpell>Finischer</DescriptionSpell>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>ComboPoint</ContionType>
          <Param xsi:type="FightClassConditionNumber">
            <Type>Bigger</Type>
            <Value>4</Value>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>MeInMove</ContionType>
          <Param xsi:type="FightClassConditionBool" />
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>
if UnitExists("target") then
	if not UnitIsFriend("player", "target") and not UnitIsDead("target") then
		local chkValue=true  --[[1784=Stealth,73651=Recuperate,5171=Slice and Dice,13750=Adrenalin Rush]]
		local chkBuffs={1784,false,13750,false}; 	for n=1,#chkBuffs,2 do chkValue=chkValue and ((UnitBuff("player",GetSpellInfo(chkBuffs[n]))~=nil)==chkBuffs[n+1]); end
		result=chkValue
	end
end;
			</LuaScript>
            <VarRet>result</VarRet>
            <ValueRet>true</ValueRet>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Killing Spree</SpellName>
      <Priority>12</Priority>
      <CombatOnly>false</CombatOnly>
      <AddToSettings>true</AddToSettings>
      <CanMoveDuringCast>No</CanMoveDuringCast>
      <DescriptionSpell>Talent. Alacrity is to prefere (Icy Veins)</DescriptionSpell>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>ComboPoint</ContionType>
          <Param xsi:type="FightClassConditionNumber">
            <Type>Bigger</Type>
            <Value>4</Value>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>
	local chkValue=true  --[[1784=Stealth,73651=Recuperate,5171=Slice and Dice]]
	local chkBuffs={5171,false}; 	for n=1,#chkBuffs,2 do chkValue=chkValue and ((UnitBuff("player",GetSpellInfo(chkBuffs[n]))~=nil)==chkBuffs[n+1]); end
	if chkValue then
		local idSaberSlash=193315
		local ssname=GetSpellInfo(idSaberSlash)
		result=(IsSpellInRange(ssname,"target")==1)
	end
</LuaScript>
            <VarRet>result</VarRet>
            <ValueRet>true</ValueRet>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Slice and Dice</SpellName>
      <Priority>11</Priority>
      <AddToSettings>true</AddToSettings>
      <OncePerTarget>true</OncePerTarget>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
      <DescriptionSpell>Talent. Death from Above is to prefere (Icy Veins)</DescriptionSpell>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>Buff</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>Opportunity</Name>
            <Need>true</Need>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>Buff</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>Stealth</Name>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>ComboPoint</ContionType>
          <Param xsi:type="FightClassConditionNumber">
            <Type>SmallerOrEqual</Type>
            <Value>4</Value>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Pistol Shot</SpellName>
      <Priority>10</Priority>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>Buff</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>Stealth</Name>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Saber Slash</SpellName>
      <Priority>9</Priority>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>
	local CP=UnitPower("player",4)
	local maxCP=UnitPowerMax("player",4)
	local TalSelected=select(5,GetTalentInfo(3,2, GetActiveSpecGroup()))
	if TalSelected then
		maxCP=5
	end
	local PistolShot=GetSpellInfo(185763)
	local BetweenTheEyes=GetSpellInfo(199804)
	local idSaberSlash=193315
	local SaberSlash=GetSpellInfo(193315)
	if UnitExists("target") and IsSpellInRange(PistolShot,"target")==1  and not(IsStealthed()) and not(IsSpellInRange(SaberSlash,"target")==1) then
		local start, duration, enabled = GetSpellCooldown(BetweenTheEyes)
		if (CP&gt;=maxCP) and (duration==0) and (IsSpellInRange(BetweenTheEyes,"target")==1) then
			CastSpellByName(BetweenTheEyes)
			result=true
		else
			local start, duration, enabled = GetSpellCooldown(PistolShot)
			if (duration==0) then
				CastSpellByName(PistolShot)
				result=true
			end
		end
	end

</LuaScript>
            <VarRet>result</VarRet>
            <ValueRet>true</ValueRet>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>--range fight</SpellName>
      <Priority>8</Priority>
      <CombatOnly>false</CombatOnly>
      <CheckIfKnow>false</CheckIfKnow>
      <CheckIfSpellUsable>false</CheckIfSpellUsable>
      <CheckSpellDistance>false</CheckSpellDistance>
      <CheckIfView>false</CheckIfView>
      <AddToSettings>true</AddToSettings>
      <NotSpellIsLuaScript>true</NotSpellIsLuaScript>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
      <DescriptionSpell>We can not only Melee, but the DPS ... :(</DescriptionSpell>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>
local function UseContainerItemByName(search)   --[[ needed below ]]
  local found=nil;
  for bag = 0,4 do
    for slot = 1,GetContainerNumSlots(bag) do
      local item = GetContainerItemLink(bag,slot)
      if (item and item:find(search)) then
		if (GetContainerItemCooldown(bag,slot)==0) then
			UseContainerItem(bag,slot)
			found=1;
		end
      end
    end
  end
  return found;
end

if UnitExists("target") and not UnitIsFriend("player", "target") then 
	if not IsStealthed() then 
		local guid=UnitGUID("target");
		local type, zero, serverId, instanceId, zoneId, npcId, spawnUid = strsplit("-",guid);
		npcId=tonumber(npcId);

		--[[ Add your Mob-IDs to the list ]]
		local KillBeast="86932,87020,87021,86727,86730,86731"		--[[ list of ID's of Mobs to trap, comma seperated ]]
			
		local maxHealth=95;				--[[ start Trap at 95% of health for non-elite Mobs ]]
		if (UnitClassification("target") == "elite") then
			maxHealth=55				--[[ start Trap  at 55% of health if it is an Elite Mob ]]
		end
		if not (UnitIsPVP("target")) and ((UnitHealth("target") / UnitHealthMax("target") * 100) &lt; maxHealth ) and (string.find(','..KillBeast..',',','..npcId..',')) then
			if (UnitName("player")==UnitName("targettarget")) then   --[[ no Ninjaing, my Mob, my target, my trap ]]
				result=true
				if not (UseContainerItemByName(":115010:")) then			--[[ Level 3 Trap must be equiped and ready]]
					if not (UseContainerItemByName(":115009:")) then		--[[ Level 2 Trap .. ]]
						if not (UseContainerItemByName(":113991:")) then	--[[ Level 1 Trap .. ]]
							result=false
						end
					end
				end
			else						--[[ the fight is over, or another User fight to them ]]
				ClearTarget();
			end
		end
	end;
end
</LuaScript>
            <VarRet>result</VarRet>
            <ValueRet>true</ValueRet>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>--Iron Trap</SpellName>
      <Priority>7</Priority>
      <CombatOnly>false</CombatOnly>
      <CheckIfKnow>false</CheckIfKnow>
      <CheckIfSpellUsable>false</CheckIfSpellUsable>
      <CheckSpellDistance>false</CheckSpellDistance>
      <CheckIfView>false</CheckIfView>
      <AddToSettings>true</AddToSettings>
      <NotSpellIsLuaScript>true</NotSpellIsLuaScript>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>
local function UseContainerItemByIDList(search)   --[[ needed below ]]
  local found=nil;
  for bag = 0,4 do
    for slot = 1,GetContainerNumSlots(bag) do
      local itemLink = GetContainerItemLink(bag,slot)
	  if itemLink then
	    local _, _, Color, Ltype, Id, Enchant, Gem1, Gem2, Gem3, Gem4, Suffix, Unique, LinkLvl, Name = string.find(itemLink,"|?c?f?f?(%x*)|?H?([^:]*):?(%d+):?(%d*):?(%d*):?(%d*):?(%d*):?(%d*):?(%-?%d*):?(%-?%d*):?(%d*):?(%d*):?(%-?%d*)|?h?%[?([^%[%]]*)%]?|?h?|?r?")	  
      	if Id then
		  search=','..search..',';
		  if (search:find(","..Id..",")) then 
			if (GetContainerItemCooldown(bag,slot)==0) then
				UseContainerItem(bag,slot)
				found=1;
			end
		  end;
		end
      end
    end
  end
  return found;
end


if not (UnitCastingInfo("player")) and not (UnitChannelInfo("player")) and not (IsFlying())  and not (IsFalling())  and not (UnitIsAFK("player")) and  ((UnitHealth("player") / UnitHealthMax("player") * 100) &lt; 51)then
	if not IsStealthed() then 
		--[[ Add your IDs to the list ]]
		local heallist="109223"
		if (UseContainerItemByIDList(heallist)) then			--[[ do not use boxes/bags and similar ]]
		   result=true;
		end
	end;
end
</LuaScript>
            <VarRet>result</VarRet>
            <ValueRet>true</ValueRet>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>--Use Item, if health low</SpellName>
      <Priority>6</Priority>
      <CheckIfKnow>false</CheckIfKnow>
      <CheckIfSpellUsable>false</CheckIfSpellUsable>
      <CheckSpellDistance>false</CheckSpellDistance>
      <CheckIfView>false</CheckIfView>
      <AddToSettings>true</AddToSettings>
      <NotSpellIsLuaScript>true</NotSpellIsLuaScript>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>ComboPoint</ContionType>
          <Param xsi:type="FightClassConditionNumber">
            <Value>5</Value>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>MeLevel</ContionType>
          <Param xsi:type="FightClassConditionNumber">
            <Type>Smaller</Type>
            <Value>10</Value>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Envenom</SpellName>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
      <DescriptionSpell>Level 3 spell</DescriptionSpell>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>MeLevel</ContionType>
          <Param xsi:type="FightClassConditionNumber">
            <Type>Smaller</Type>
            <Value>10</Value>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Mutilate</SpellName>
      <Priority>4</Priority>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
      <DescriptionSpell>Level 1 spell</DescriptionSpell>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>Buff</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>Deadly Poison</Name>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>MeLevel</ContionType>
          <Param xsi:type="FightClassConditionNumber">
            <Type>Smaller</Type>
            <Value>10</Value>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Deadly Poison</SpellName>
      <Priority>3</Priority>
      <CombatOnly>false</CombatOnly>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
      <DescriptionSpell>Level 2 spell</DescriptionSpell>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript> 
if UnitExists("target") and not UnitIsDead("target") and not UnitIsFriend("player", "target") then 
	if IsStealthed() then
		local idSaberSlash=193315
		local ssname=GetSpellInfo(idSaberSlash)
		result=(IsSpellInRange(ssname,"target")==1)
	end
end
			</LuaScript>
            <VarRet>result</VarRet>
            <ValueRet>true</ValueRet>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>--stealth, do nothing (workaround)</SpellName>
      <Priority>2</Priority>
      <CheckIfKnow>false</CheckIfKnow>
      <CheckIfSpellUsable>false</CheckIfSpellUsable>
      <CheckSpellDistance>false</CheckSpellDistance>
      <NotSpellIsLuaScript>true</NotSpellIsLuaScript>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
      <DescriptionSpell>Prevent a hit in Stealth</DescriptionSpell>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>
local function UseContainerItemByIDList(search)   --[[ needed below ]]
  local found=nil;
  for bag = 0,4 do
    for slot = 1,GetContainerNumSlots(bag) do
      local itemLink = GetContainerItemLink(bag,slot)
	  if itemLink then
	    local _, _, Color, Ltype, Id, Enchant, Gem1, Gem2, Gem3, Gem4, Suffix, Unique, LinkLvl, Name = string.find(itemLink,"|?c?f?f?(%x*)|?H?([^:]*):?(%d+):?(%d*):?(%d*):?(%d*):?(%d*):?(%d*):?(%-?%d*):?(%-?%d*):?(%d*):?(%d*):?(%-?%d*)|?h?%[?([^%[%]]*)%]?|?h?|?r?")	  
      	if Id then
		  search=','..search..',';
		  if (search:find(","..Id..",")) then 
			if (GetContainerItemCooldown(bag,slot)==0) then
				UseContainerItem(bag,slot)
				found=1;
			end
		  end;
		end
      end
    end
  end
  return found;
end


if (GetUnitSpeed("player") == 0) and not (UnitCastingInfo("player")) and not (UnitChannelInfo("player")) and not (UnitAffectingCombat("player")) and not (IsFlying())  and not (IsFalling())  and not (UnitIsAFK("player")) then
	if not IsStealthed() then 
		--[[ Add your Mob-IDs to the list ]]
		local archlist="114141,114143,114145,114147,114149,114151,114153,114155,114157,114159,114161,114163,114165,114167,114169,114171,114173,114175,114177,114179,114181,114183,114185,114187,114189,114190,114191,114192,114193,114194,114195,114196,114197,114198,114199,114200,114201,114202,114203,114204,114205,114206,114207,79896,79897,79898,79899,79900,79901,79902,79903,79904,79905,79908,79909,79910,79911,79912,79913,79914,79915,79916,79917,95375,95376,95377,95378,95379,95380,95381,95382"
		local fishlist="112633,141975"
		local artefact="140310,138783,138885,142054,141934,138781,138782,141023,141690,139656,139657,139655,133715,139661,133716,139662,133713,133714,139663" --[[  ]]
		if (UseContainerItemByIDList(archlist..","..fishlist..","..artefact)) then			--[[ do not use boxes/bags and similar ]]
		   result=true;
		end
	end;
end
</LuaScript>
            <VarRet>result</VarRet>
            <ValueRet>true</ValueRet>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>--Use Item, if exist</SpellName>
      <Priority>1</Priority>
      <CombatOnly>false</CombatOnly>
      <CheckIfKnow>false</CheckIfKnow>
      <CheckIfSpellUsable>false</CheckIfSpellUsable>
      <CheckSpellDistance>false</CheckSpellDistance>
      <CheckIfView>false</CheckIfView>
      <AddToSettings>true</AddToSettings>
      <NotSpellIsLuaScript>true</NotSpellIsLuaScript>
      <CanMoveDuringCast>No</CanMoveDuringCast>
      <DescriptionSpell>Useful for Archaelogy (MoP, WoD)</DescriptionSpell>
    </FightClassSpell>
  </FightClassSpells>
</FightClass>